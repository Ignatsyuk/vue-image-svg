(function(s,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],i):(s=typeof globalThis<"u"?globalThis:s||self,i(s.Image={},s.Vue))})(this,function(s,i){"use strict";const o={};function a(e){return Object.keys(e).reduce((t,n)=>(e[n]!==!1&&e[n]!==null&&e[n]!==void 0&&(t[n]=e[n]),t),{})}const d={name:"InlineSvg",inheritAttrs:!1,render(){return this.svgElSource?i.h("svg",Object.assign({},this.getSvgAttrs(this.svgElSource),a(this.$attrs),{innerHTML:this.getSvgContent(this.svgElSource)})):null},props:{src:{type:String,required:!0},title:{type:String},transformSource:{type:Function,default:e=>e},keepDuringLoading:{type:Boolean,default:!0}},emits:["loaded","unloaded","error"],data(){return{svgElSource:null}},watch:{src(e){this.getSource(e)}},mounted(){this.getSource(this.src)},methods:{getSvgAttrs(e){let t={};const n=e.attributes;if(!n)return t;for(let r=n.length-1;r>=0;r--)t[n[r].name]=n[r].value;return t},getSvgContent(e){return e=e.cloneNode(!0),e=this.transformSource(e),this.title&&g(e,this.title),e.innerHTML},getSource(e){o[e]||(o[e]=this.download(e)),this.svgElSource&&o[e].getIsPending()&&!this.keepDuringLoading&&(this.svgElSource=null,this.$emit("unloaded")),o[e].then(t=>{this.svgElSource=t,this.$nextTick(()=>{this.$emit("loaded",this.$el)})}).catch(t=>{this.svgElSource&&(this.svgElSource=null,this.$emit("unloaded")),delete o[e],this.$emit("error",t)})},download(e){return f(new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=()=>{if(r.status>=200&&r.status<400)try{let c=new DOMParser().parseFromString(r.responseText,"text/xml").getElementsByTagName("svg")[0];c?t(c):n(new Error('Loaded file is not valid SVG"'))}catch(l){n(l)}else n(new Error("Error loading SVG"))},r.onerror=n,r.send()}))}}};function g(e,t){const n=e.getElementsByTagName("title");if(n.length)n[0].textContent=t;else{const r=document.createElementNS("http://www.w3.org/2000/svg","title");r.textContent=t,e.insertBefore(r,e.firstChild)}}function f(e){if(e.getIsPending)return e;let t=!0,n=e.then(r=>(t=!1,r),r=>{throw t=!1,r});return n.getIsPending=function(){return t},n}const m="",h=["src","alt"],u={__name:"Image",props:{src:{type:String,required:!0},alt:{type:String},defaultSrc:{type:String,default:""}},setup(e){const t=e;function n(r){t.defaultSrc&&(r.target.src=t.defaultSrc)}return(r,l)=>e.src.includes(".svg")?(i.openBlock(),i.createBlock(i.unref(d),{key:0,src:e.src},null,8,["src"])):(i.openBlock(),i.createElementBlock("img",{key:1,src:e.src,alt:e.alt,onError:n},null,40,h))}},S={install:(e,t)=>e.component("Image",u)};s.Image=u,s.default=S,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
