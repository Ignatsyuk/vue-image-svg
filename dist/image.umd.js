(function(i,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],s):(i=typeof globalThis<"u"?globalThis:i||self,s(i.Image={},i.Vue))})(this,function(i,s){"use strict";const o={};function a(e){return Object.keys(e).reduce((t,n)=>(e[n]!==!1&&e[n]!==null&&e[n]!==void 0&&(t[n]=e[n]),t),{})}const d={name:"InlineSvg",inheritAttrs:!1,render(){return this.svgElSource?s.h("svg",Object.assign({},this.getSvgAttrs(this.svgElSource),a(this.$attrs),{innerHTML:this.getSvgContent(this.svgElSource)})):null},props:{src:{type:String,required:!0},title:{type:String},transformSource:{type:Function,default:e=>e},keepDuringLoading:{type:Boolean,default:!0}},emits:["loaded","unloaded","error"],data(){return{svgElSource:null}},watch:{src(e){this.getSource(e)}},mounted(){this.getSource(this.src)},methods:{getSvgAttrs(e){let t={};const n=e.attributes;if(!n)return t;for(let r=n.length-1;r>=0;r--)t[n[r].name]=n[r].value;return t},getSvgContent(e){return e=e.cloneNode(!0),e=this.transformSource(e),this.title&&g(e,this.title),e.innerHTML},getSource(e){o[e]||(o[e]=this.download(e)),this.svgElSource&&o[e].getIsPending()&&!this.keepDuringLoading&&(this.svgElSource=null,this.$emit("unloaded")),o[e].then(t=>{this.svgElSource=t,this.$nextTick(()=>{this.$emit("loaded",this.$el)})}).catch(t=>{this.svgElSource&&(this.svgElSource=null,this.$emit("unloaded")),delete o[e],this.$emit("error",t)})},download(e){return f(new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=()=>{if(r.status>=200&&r.status<400)try{let c=new DOMParser().parseFromString(r.responseText,"text/xml").getElementsByTagName("svg")[0];c?t(c):n(new Error('Loaded file is not valid SVG"'))}catch(u){n(u)}else n(new Error("Error loading SVG"))},r.onerror=n,r.send()}))}}};function g(e,t){const n=e.getElementsByTagName("title");if(n.length)n[0].textContent=t;else{const r=document.createElementNS("http://www.w3.org/2000/svg","title");r.textContent=t,e.insertBefore(r,e.firstChild)}}function f(e){if(e.getIsPending)return e;let t=!0,n=e.then(r=>(t=!1,r),r=>{throw t=!1,r});return n.getIsPending=function(){return t},n}const p="",h=["src","alt"],l={__name:"Image",props:{src:{type:String,required:!0},alt:{type:String}},setup(e){const t=e;return(n,r)=>t.src.includes(".svg")?(s.openBlock(),s.createBlock(s.unref(d),{key:0,src:t.src},null,8,["src"])):(s.openBlock(),s.createElementBlock("img",{key:1,src:t.src,alt:t.alt},null,8,h))}},m={install:(e,t)=>e.component("Image",l)};i.Image=l,i.default=m,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
