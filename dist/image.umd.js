(function(s,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],i):(s=typeof globalThis<"u"?globalThis:s||self,i(s.Image={},s.Vue))})(this,function(s,i){"use strict";const o={};function c(e){return Object.keys(e).reduce((n,t)=>(e[t]!==!1&&e[t]!==null&&e[t]!==void 0&&(n[t]=e[t]),n),{})}const d={name:"InlineSvg",inheritAttrs:!1,render(){return this.svgElSource?i.h("svg",Object.assign({},this.getSvgAttrs(this.svgElSource),c(this.$attrs),{innerHTML:this.getSvgContent(this.svgElSource)})):null},props:{src:{type:String,required:!0},title:{type:String},transformSource:{type:Function,default:e=>e},keepDuringLoading:{type:Boolean,default:!0}},emits:["loaded","unloaded","error"],data(){return{svgElSource:null}},watch:{src(e){this.getSource(e)}},mounted(){this.getSource(this.src)},methods:{getSvgAttrs(e){let n={};const t=e.attributes;if(!t)return n;for(let r=t.length-1;r>=0;r--)n[t[r].name]=t[r].value;return n},getSvgContent(e){return e=e.cloneNode(!0),e=this.transformSource(e),this.title&&g(e,this.title),e.innerHTML},getSource(e){o[e]||(o[e]=this.download(e)),this.svgElSource&&o[e].getIsPending()&&!this.keepDuringLoading&&(this.svgElSource=null,this.$emit("unloaded")),o[e].then(n=>{this.svgElSource=n,this.$nextTick(()=>{this.$emit("loaded",this.$el)})}).catch(n=>{this.svgElSource&&(this.svgElSource=null,this.$emit("unloaded")),delete o[e],this.$emit("error",n)})},download(e){return f(new Promise((n,t)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=()=>{if(r.status>=200&&r.status<400)try{let a=new DOMParser().parseFromString(r.responseText,"text/xml").getElementsByTagName("svg")[0];a?n(a):t(new Error('Loaded file is not valid SVG"'))}catch(l){t(l)}else t(new Error("Error loading SVG"))},r.onerror=t,r.send()}))}}};function g(e,n){const t=e.getElementsByTagName("title");if(t.length)t[0].textContent=n;else{const r=document.createElementNS("http://www.w3.org/2000/svg","title");r.textContent=n,e.insertBefore(r,e.firstChild)}}function f(e){if(e.getIsPending)return e;let n=!0,t=e.then(r=>(n=!1,r),r=>{throw n=!1,r});return t.getIsPending=function(){return n},t}const m="",h=["src","alt"],u={__name:"Image",props:{src:{type:String,required:!0},alt:{type:String},alternativeSrc:{type:String}},setup(e){const n=e;function t(r){n.alternativeSrc&&(r.target.src=n.alternativeSrc)}return(r,l)=>e.src.includes(".svg")?(i.openBlock(),i.createBlock(i.unref(d),{key:0,src:e.src,onError:t},null,8,["src"])):(i.openBlock(),i.createElementBlock("img",{key:1,src:e.src,alt:e.alt,onError:t},null,40,h))}},S={install:(e,n)=>e.component("Image",u)};s.Image=u,s.default=S,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
